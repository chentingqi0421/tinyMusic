(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-33248c32"],{"06b6":function(t,s,e){},"13d5":function(t,s,e){"use strict";var i=e("23e7"),a=e("d58f").left,n=e("a640"),r=e("ae40"),c=e("2d00"),o=e("605d"),l=n("reduce"),u=r("reduce",{1:0}),h=!o&&c>79&&c<83;i({target:"Array",proto:!0,forced:!l||!u||h},{reduce:function(t){return a(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"1a6f":function(t,s,e){"use strict";e("e626")},"1d61":function(t,s,e){"use strict";e("326b")},"2d3b":function(t,s,e){"use strict";e.r(s);var i=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"box"},[e("div",{staticClass:"searchbox"},[e("span",{staticClass:"menuicon iconfont icon-left",on:{click:t.houtui}}),e("p",{staticClass:"search"},[e("router-link",{attrs:{to:"/search"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.inpval,expression:"inpval"}],attrs:{type:"text",placeholder:"搜索音乐、歌手、歌词"},domProps:{value:t.inpval},on:{keydown:function(s){return!s.type.indexOf("key")&&t._k(s.keyCode,"enter",13,s.key,"Enter")?null:t.enterclick(t.inpval)},input:function(s){s.target.composing||(t.inpval=s.target.value)}}})]),e("span",{staticClass:"iconfont icon-sousuo"}),e("span",{directives:[{name:"show",rawName:"v-show",value:t.inpval.length>0,expression:"inpval.length > 0"}],staticClass:"iconfont icon-quxiao1",on:{click:t.clearvalue}})],1)]),e("div",{directives:[{name:"show",rawName:"v-show",value:0==t.inpval.length,expression:"inpval.length == 0"}],staticClass:"hotsearch"},[e("MainTitle",[t._v("热门搜索")]),e("ul",t._l(t.hotsearch,(function(s,i){return e("li",{key:i,on:{click:function(e){return t.clickhotsearch(s.searchWord)}}},[e("span",{staticClass:"num"},[t._v(" "+t._s(i+1)+" ")]),t._v(" "+t._s(s.searchWord)),e("i",{directives:[{name:"show",rawName:"v-show",value:i<3,expression:"k < 3"}],staticClass:"hot"},[t._v("hot")])])})),0)],1),e("div",{directives:[{name:"show",rawName:"v-show",value:0==t.inpval.length,expression:"inpval.length == 0"}],staticClass:"searchHistory"},[e("div",{staticClass:"title"},[e("MainTitle",[t._v("历史搜索")]),e("Icon",{attrs:{type:"md-trash",size:"18"},on:{click:t.deleteAll}})],1),e("div",{staticClass:"cell clearfix"},t._l(t.searchHistory,(function(s,i){return e("div",{key:i,staticClass:"fl",on:{click:function(e){return t.historyKeyword(s)}}},[t._v(t._s(s))])})),0)]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.showsuggest,expression:"showsuggest"}],staticClass:"suggestbox"},[e("ul",[e("li",{staticClass:"selfinput"},[t._v(' 搜索"'),e("span",[t._v(t._s(t.inpval))]),t._v('" ')]),e("Loading",{directives:[{name:"show",rawName:"v-show",value:t.searching,expression:"searching"}]}),t._l(t.suggests,(function(s){return e("li",{key:s.id,on:{click:function(e){return t.clickList(s.name)}}},[e("span",{staticClass:"iconfont icon-sousuo"}),t._v(t._s(s.name)+" ")])}))],2)]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.showresult,expression:"showresult"}],staticClass:"searchresult"},[e("Searchresult",{attrs:{searchMusicList:t.searchMusicList}})],1)])},a=[],n=(e("99af"),e("c975"),e("d81d"),e("13d5"),e("fb6a"),e("b0c0"),e("d3b7"),e("6062"),e("3ca3"),e("ddb0"),e("2909")),r=e("3a5e"),c=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ul",t._l(t.searchMusicList,(function(s){return e("GeneralList",{key:s.id,attrs:{list:t.searchMusicList,item:s}})})),1)},o=[],l=e("ca85"),u={name:"searchsult",props:["searchMusicList"],components:{GeneralList:l["a"]}},h=u,d=e("2877"),f=Object(d["a"])(h,c,o,!1,null,"961b927a",null),v=f.exports,g=e("a12e"),p={name:"search",data:function(){return{inpval:"",hotsearch:[],suggests:[],searchMusicList:[],searching:!1,showsuggest:!1,showresult:!1,inpflag:!0,searchHistory:[],throttle:!0}},components:{Loading:r["a"],Searchresult:v,MainTitle:g["a"]},created:function(){this.getSearchHots(),null!=localStorage.getItem("searchHistory")&&(this.searchHistory=JSON.parse(localStorage.getItem("searchHistory")).data)},methods:{getSearchHots:function(){var t=this;this.axios.get("/search/hot/detail").then((function(s){t.hotsearch=s.data.data}))},houtui:function(){this.$router.back(),this.inpval="",this.showresult=!1},clickhotsearch:function(t){this.clickList(t)},clearvalue:function(){this.inpval="",this.showresult=!1},clickList:function(t){var s=this;this.addSearchHistory(t),this.inpflag=!1,this.inpval=t,this.showsuggest=!1,this.showresult=!0,this.searching=!0,this.$http.get("/search?keywords="+t).then((function(t){200==t.data.code&&(s.searching=!1,s.searchMusicList=t.data.result.songs.map((function(t){return{name:t.name,id:t.id,song:{artists:t.artists,album:{name:t.album.name},privilege:{maxbr:92e4}}}})))}))},enterclick:function(t){this.clickList(t),this.inpflag=!0},historyKeyword:function(t){this.clickList(t)},addSearchHistory:function(t){null==localStorage.getItem("searchHistory")&&localStorage.setItem("searchHistory",JSON.stringify({data:[]}));var s=JSON.parse(localStorage.getItem("searchHistory")).data;s.indexOf(t)<0&&(s.push(t),this.searchHistory=s,localStorage.setItem("searchHistory",JSON.stringify({data:this.searchHistory})))},deleteAll:function(){this.searchHistory=[],localStorage.setItem("searchHistory",JSON.stringify({data:[]}))},deleteSearchHistory:function(t){var s=JSON.parse(localStorage.getItem("searchHistory")).data,e=new Set(s);e.delete(s[t]),s=Object(n["a"])(e),this.searchHistory=s,localStorage.setItem("searchHistory",JSON.stringify({data:s}))}},watch:{inpval:function(t){var s=this;""==t&&(this.showresult=!1,this.showsuggest=!1),this.inpflag&&t&&this.throttle?(this.throttle=!1,this.searching=!0,this.suggests=[],this.showsuggest=!0,this.showresult=!1,this.$http.get("/search/suggest?keywords="+t).then((function(t){if(200==t.data.code){var e=t.data.result;if(e.order){var i=e.order.reduce((function(t,s){var i=e[s];return t.concat(i)}),[]);s.suggests=i.slice(0,8),s.searching=!1}}})).finally((function(){s.searching=!1})),""==this.inpval&&(this.suggests=[],this.showsuggest=!1),setTimeout((function(){s.throttle=!0}),1e3)):this.inpflag=!0}}},m=p,w=(e("1a6f"),Object(d["a"])(m,i,a,!1,null,"9849feaa",null));s["default"]=w.exports},"326b":function(t,s,e){},"3a5e":function(t,s,e){"use strict";var i=function(){var t=this,s=t.$createElement;t._self._c;return t._m(0)},a=[function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"loadingbox"},[e("div",{staticClass:"loadtip"}),e("div",{staticClass:"loadtip"}),e("div",{staticClass:"loadtip"})])}],n=(e("60d2"),e("2877")),r={},c=Object(n["a"])(r,i,a,!1,null,"6fe757d9",null);s["a"]=c.exports},"60d2":function(t,s,e){"use strict";e("06b6")},6704:function(t,s,e){},a12e:function(t,s,e){"use strict";var i=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("h2",{staticClass:"title ximai"},[t._t("default")],2)},a=[],n=(e("1d61"),e("2877")),r={},c=Object(n["a"])(r,i,a,!1,null,"2e46c6bf",null);s["a"]=c.exports},a640:function(t,s,e){"use strict";var i=e("d039");t.exports=function(t,s){var e=[][t];return!!e&&i((function(){e.call(null,s||function(){throw 1},1)}))}},ab5e:function(t,s,e){"use strict";e("6704")},c975:function(t,s,e){"use strict";var i=e("23e7"),a=e("4d64").indexOf,n=e("a640"),r=e("ae40"),c=[].indexOf,o=!!c&&1/[1].indexOf(1,-0)<0,l=n("indexOf"),u=r("indexOf",{ACCESSORS:!0,1:0});i({target:"Array",proto:!0,forced:o||!l||!u},{indexOf:function(t){return o?c.apply(this,arguments)||0:a(this,t,arguments.length>1?arguments[1]:void 0)}})},ca85:function(t,s,e){"use strict";var i=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("li",{on:{click:t.playMusic}},[t._t("default"),e("div",{staticClass:"left"},[e("div",[t._v(t._s(t.item.name))]),e("p",[t.item.song.privilege.maxbr>32e4?e("span",{staticClass:"sq"}):t._e(),t._l(t.item.song.artists,(function(s,i){return e("span",{key:i},[e("b",{directives:[{name:"show",rawName:"v-show",value:i>0,expression:"k>0"}]},[t._v(" / ")]),t._v(t._s(s.name)+" ")])})),t._v(" - "+t._s(t.item.song.album.name)+" ")],2)]),e("div",{staticClass:"right"},[t.$store.state.musicID==t.item.id?e("span",{staticClass:"playing",class:{paused:!t.$store.state.isPlay}},[e("i"),e("i"),e("i"),e("i")]):t._e()])],2)},a=[],n=(e("d81d"),{props:{item:{type:Object,default:function(){return{name:""}}},list:null},data:function(){return{paused:!1}},created:function(){},methods:{playMusic:function(){var t=this;this.list.map((function(s,e){s.id==t.item.id&&t.$store.commit("changemusicIndex",e)})),this.$store.commit("changemusicID",this.item.id),this.$store.commit("changeplaystatus",!0),this.$store.commit("changemusicList",this.list)}}}),r=n,c=(e("ab5e"),e("2877")),o=Object(c["a"])(r,i,a,!1,null,"48388f78",null);s["a"]=o.exports},d58f:function(t,s,e){var i=e("1c0b"),a=e("7b0b"),n=e("44ad"),r=e("50c4"),c=function(t){return function(s,e,c,o){i(e);var l=a(s),u=n(l),h=r(l.length),d=t?h-1:0,f=t?-1:1;if(c<2)while(1){if(d in u){o=u[d],d+=f;break}if(d+=f,t?d<0:h<=d)throw TypeError("Reduce of empty array with no initial value")}for(;t?d>=0:h>d;d+=f)d in u&&(o=e(o,u[d],d,l));return o}};t.exports={left:c(!1),right:c(!0)}},e626:function(t,s,e){}}]);
//# sourceMappingURL=chunk-33248c32.1ff96bf7.js.map